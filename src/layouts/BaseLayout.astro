---
import Navigation from '../components/Navigation.astro';
import '../styles/global.css';

interface Props {
  title: string;
  description?: string;
  image?: string;
}

const {
  title,
  description = 'Music for film, TV, and advertising by Chris Randall',
  image = '/banner.png'
} = Astro.props;

const siteUrl = 'https://chrisrandall.net';
const fullTitle = `${title} | Chris Randall`;
const canonicalUrl = new URL(Astro.url.pathname, siteUrl).toString();

const jsonLd = {
  "@context": "https://schema.org",
  "@type": "MusicGroup",
  "name": "Chris Randall",
  "url": siteUrl,
  "image": `${siteUrl}/favicon.png`,
  "description": "Composer, recording artist, and music technology entrepreneur. Former frontman of Sister Machine Gun. Co-founder of Audio Damage, Inc.",
  "genre": ["Electronic", "Industrial", "Ambient", "Film Score"],
  "sameAs": [
    "https://www.instagram.com/chris.randall/",
    "https://bsky.app/profile/chrisrandall.net",
    "https://www.youtube.com/@ChrisRandallMusic",
    "https://chrisrandall.bandcamp.com",
    "https://micronaut.bandcamp.com",
    "https://www.audiodamage.com",
    "https://www.imdb.com/name/nm2136614/",
    "https://en.wikipedia.org/wiki/Chris_Randall_(musician)",
    "https://www.discogs.com/artist/79640-Chris-Randall"
  ],
  "member": {
    "@type": "Person",
    "name": "Chris Randall",
    "birthDate": "1968",
    "birthPlace": "Honolulu, Hawaii",
    "jobTitle": "Composer",
    "knowsAbout": ["Music Composition", "Sound Design", "Music Production", "Synthesizers"]
  }
};
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content={description} />
    <meta name="generator" content={Astro.generator} />
    <title>{fullTitle}</title>

    <!-- Canonical URL -->
    <link rel="canonical" href={canonicalUrl} />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalUrl} />
    <meta property="og:title" content={fullTitle} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={`${siteUrl}${image}`} />
    <meta property="og:site_name" content="Chris Randall" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={fullTitle} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={`${siteUrl}${image}`} />

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />
  </head>
  <body>
    <Navigation />
    <main>
      <slot />
    </main>
    <footer>
      <div class="container">
        <div class="footer-social">
          <a href="https://www.instagram.com/chris.randall/" target="_blank" rel="noopener" aria-label="Instagram">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></svg>
          </a>
          <a href="https://bsky.app/profile/chrisrandall.net" target="_blank" rel="noopener" aria-label="Bluesky">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"/></svg>
          </a>
          <a href="https://www.youtube.com/@ChrisRandallMusic" target="_blank" rel="noopener" aria-label="YouTube">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
          </a>
          <a href="#" id="footer-email" aria-label="Email">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
          </a>
        </div>
        <p>&copy; {new Date().getFullYear()} Chris Randall. All rights reserved.</p>
      </div>
    </footer>
    <script>
      const e = 'cr' + '@' + 'chrisrandall.net';
      const footerLink = document.getElementById('footer-email');
      if (footerLink) {
        footerLink.href = 'mailto:' + e;
      }
    </script>
  </body>
</html>

<style>
  main {
    min-height: calc(100vh - 200px);
    padding: 3rem 0;
  }

  footer {
    border-top: 1px solid var(--color-border);
    padding: 2rem 0;
    text-align: center;
    color: var(--color-text-muted);
    font-size: 0.875rem;
  }

  .footer-social {
    display: flex;
    justify-content: center;
    gap: 1.5rem;
    margin-bottom: 1rem;
  }

  .footer-social a {
    color: var(--color-text-muted);
    transition: color 0.2s ease;
  }

  .footer-social a:hover {
    color: var(--color-accent);
  }
</style>
